
# PHP ORM

Данный PHP-класс предоставляет простую Object-Relational Mapping (ORM) систему для взаимодействия с базой данных MySQL. Он автоматически создает таблицы, управляет колонками и поддерживает основные операции CRUD, что упрощает работу с базой данных.

## Основные возможности

- **Автоматическое управление таблицами и колонками**: ORM создает таблицы и добавляет отсутствующие колонки, исходя из переданных данных.
- **Операции CRUD**: Простейшие функции для создания, чтения, обновления и удаления записей.
- **Условные обновления и кастомные запросы**: Возможность выполнять обновления с определенными условиями или запускать произвольные SQL-запросы.
- **Автоматическое определение типов данных**: Класс автоматически определяет и изменяет типы колонок при необходимости.

## Использование

**1. Настройка**
Перед началом работы настройте подключение к базе данных и укажите таблицу, с которой будет работать ORM:

    ORM::setup('mysql:host=localhost;dbname=your_db', 'username', 'password');
    $orm = new ORM('users'); //  'users' — имя таблицы

## **2. Основные операции CRUD**

**Создание новой записи**
Создает новую запись в таблице. Если таблица или колонки не существуют, они будут созданы автоматически.

    $orm->create([
        'name' => 'Иван Иванов',
        'age' => 30,
        'email' => 'ivan@example.com'
    ]);

**Чтение записи по ID**
Извлекает запись с указанным ID.

    $user = $orm->find(1); // Извлекает запись с ID = 1

**Обновление записи по ID**
Изменяет запись с указанным ID. Если тип данных отличается от текущего типа колонки, ORM автоматически изменит тип колонки.

    $orm->update(1, [
        'name' => 'Иван Петров',
        'age' => 32
    ]);

**Удаление записи по ID**
Удаляет запись с указанным ID.

    $orm->delete(1); // Удаляет запись с ID = 1

## 3. Дополнительные функции
**Условное обновление записей**
Обновляет записи, которые соответствуют заданным условиям.

    $orm->updateWhere(['status' => 'inactive'], ['age' => 30]);

**Обновление всех записей**
Обновляет все записи в таблице, задавая одно и то же значение для выбранных полей.

    $orm->updateAll(['status' => 'active']);

**Запуск произвольного SQL-запроса**
Позволяет выполнить кастомный SQL-запрос с параметрами.

    $results = $orm->query("SELECT * FROM users WHERE age > :age", ['age' => 25]);

**Поиск записей по значению в колонке**
Находит записи с определенным значением в колонке и позволяет исключить определенные поля из результата.

    $users = $orm->findByColumn('status', 'active', ['password']);

## Пример использования
    
    // Настройка
    ORM::setup('mysql:host=localhost;dbname=mydatabase', 'myuser', 'mypassword');
    $userORM = new ORM('users');
    
    // Создание нового пользователя
    $userORM->create([
        'name' => 'Алиса',
        'email' => 'alice@example.com',
        'age' => 25
    ]);
    
    // Обновление пользователя по ID
    $userORM->update(1, ['name' => 'Алиса Обновленная', 'age' => 26]);
    
    // Поиск пользователя по ID
    $user = $userORM->find(1);
    
    // Получение всех пользователей
    $allUsers = $userORM->findAll();
    
    // Обновление всех пользователей
    $userORM->updateAll(['status' => 'active']);
    
    // Удаление пользователя
    $userORM->delete(1);

## Требования
- PHP 7.4 или выше
- MySQL база данных
- Поддержка PDO в PHP

Для получения дополнительной информации, ознакомьтесь с комментариями к коду в ORM.php. Класс предоставляет мощный и удобный способ работы с базой данных в PHP-проектах.
